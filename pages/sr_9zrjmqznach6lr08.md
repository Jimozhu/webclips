---
title: "ç”µå•†æœ€å°å­˜è´§ - SKU å’Œ ç®—æ³•å®ç°"
date: 2022-02-09T15:18:46+08:00
draft: false
categories: [dev]
tags: [dev]
---
> åŸæ–‡åœ°å€ [juejin.cn](https://juejin.cn/post/7002746459456176158)

## å‰è¨€

ç›®å‰ç”µå•†å¹³å°çš„ä¸šåŠ¡ä¸­ï¼Œåªè¦æœ‰å•†å“ï¼Œä¸å¯é¿å…çš„ä¼šé‡åˆ° [SKU](https://baike.baidu.com/item/%E6%9C%80%E5%B0%8F%E5%AD%98%E8%B4%A7%E5%8D%95%E4%BD%8D) æ–¹é¢åŠŸèƒ½ã€‚è¿™ç¯‡æ–‡ç« å°±ä»ç†è®ºåˆ°å®è·µï¼Œä»å•†å“åˆ›å»ºåˆ°å•†å“è´­ä¹°ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ å®ç° SKU ç›¸å…³çš„â€œæ ¸å¿ƒç®—æ³•â€ã€‚

è®©æˆ‘ä»¬çœ‹çœ‹å®é™…åœºæ™¯ï¼š

![](https://simpleread.oss-cn-guangzhou.aliyuncs.com/sr_9zrjmqznach6lr08/131785a5.gif)

æœ‰äº†ä¸Šå›¾è§„æ ¼é€‰ä¸­é¢„å¤„ç†ï¼Œå°±èƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·åœ¨è´­ä¹°å•†å“æ—¶ï¼Œç›´è§‚çš„äº†è§£åˆ°å•†å“æ˜¯å¦å¯ä»¥è´­ä¹°ã€‚

åœ¨æˆ‘ä»¬å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå•†å“åˆ›å»ºé¡µä¼šå…ˆè¿›è¡Œè§„æ ¼ç»„è£…ï¼Œå•†å“è´­ä¹°é¡µä¼šå¯¹è§„æ ¼é€‰æ‹©åšå¤„ç†ã€‚è§„æ ¼ç»„è£…é€šè¿‡è§„æ ¼ç»„åˆæˆ SKU é›†åˆï¼Œè§„æ ¼é€‰æ‹©æ ¹æ®è§„æ ¼å†…å®¹è·å–åº“å­˜æ•°æ®é‡ï¼Œè®¡ç®— SKU æ˜¯å¦å¯è¢«é€‰æ‹©ï¼Œä¸¤è€…åŠŸèƒ½åœ¨ç”µå•†æµç¨‹ä¸­ç¼ºä¸€ä¸å¯ã€‚

## ç»„è£… SKU å®è·µ

#### å±æ€§æè¿°

æ ¹æ®[ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/%E6%9C%80%E5%B0%8F%E5%AD%98%E8%B4%A7%E5%8D%95%E4%BD%8D)è§£é‡Šçš„ SKU

- æœ€å°å­˜è´§å•ä½\( Stock Keeping Unit \) åœ¨è¿é”é›¶å”®é—¨åº—ä¸­æœ‰æ—¶ç§°å•å“ä¸ºä¸€ä¸ª SKUï¼Œå®šä¹‰ä¸ºä¿å­˜åº“å­˜æ§åˆ¶çš„æœ€å°å¯ç”¨å•ä½ï¼Œä¾‹å¦‚çººç»‡å“ä¸­ä¸€ä¸ª SKU é€šå¸¸è¡¨ç¤ºè§„æ ¼ã€é¢œè‰²ã€æ¬¾å¼ã€‚

#### ä¸šåŠ¡åœºæ™¯

- åªè¦æ˜¯åšç”µå•†ç±»ç›¸å…³çš„äº§å“ï¼Œæ¯”å¦‚è´­ç‰© APPã€è´­ç‰©ç½‘ç«™ç­‰ç­‰ï¼Œéƒ½ä¼šé‡åˆ°è¿™ä¹ˆä¸€ä¸ªåœºæ™¯ï¼Œæ¯ä¸ªå•†å“å¯¹åº”ç€å¤šä¸ªè§„æ ¼ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®ä¸åŒçš„è§„æ ¼ç»„åˆï¼Œé€‰æ‹©å‡ºè‡ªå·±æƒ³è¦çš„äº§å“ã€‚æˆ‘ä»¬è‡ªå·±åœ¨ç”Ÿæ´»ä¸­ä¹Ÿä¼šç»å¸¸ç”¨åˆ°è¿™ä¸ªåŠŸèƒ½ã€‚

é€šè¿‡ä¸Šé¢æè¿°ï¼Œè®©æˆ‘ä»¬æŠŠæ¦‚å¿µå’Œå®é™…æ•°æ®å…³è”èµ·æ¥ï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥ä¸¾ä¸ª ğŸŒ° ï¼š

ç°æœ‰è§„æ ¼

```javascript
const type = ["ç”·è£¤", "å¥³è£¤"];
const color = ["é»‘è‰²", "ç™½è‰²"];
const size = ["S", "L"];
```

é‚£ä¹ˆæ ¹æ®ç°æœ‰è§„æ ¼ï¼Œå¯ä»¥å¾—åˆ°æ‰€æœ‰çš„ SKU ä¸ºï¼š

```javascript
[
  ["ç”·è£¤", "é»‘è‰²", "S"],
  ["ç”·è£¤", "é»‘è‰²", "L"],
  ["ç”·è£¤", "ç™½è‰²", "S"],
  ["ç”·è£¤", "ç™½è‰²", "L"],
  ["å¥³è£¤", "é»‘è‰²", "S"],
  ["å¥³è£¤", "é»‘è‰²", "L"],
  ["å¥³è£¤", "ç™½è‰²", "S"],
  ["å¥³è£¤", "ç™½è‰²", "L"],
];
```

ä¸Šè¿° SKU æ˜¯å¦‚ä½•å¾—åˆ°çš„å‘¢ï¼Œè®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹å®ç°æ€è·¯ï¼Œå¹¶ä¸”é€šè¿‡ä¸Šé¢çš„ ğŸŒ° æ¥è®¡ç®—ä¸€éã€‚

### SKU ç»„åˆå®ç°æ€è·¯

#### ç¬›å¡å°”ç§¯

é¦–å…ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹ç¬›å¡å°”ç§¯çš„æè¿°

- ç¬›å¡å°”ä¹˜ç§¯æ˜¯æŒ‡åœ¨æ•°å­¦ä¸­ï¼Œä¸¤ä¸ª\[é›†åˆ\] _X_ å’Œ _Y_ çš„ç¬›å¡å°”ç§¯\(Cartesian product\)ï¼Œåˆç§° \[ ç›´ç§¯ \] ï¼Œè¡¨ç¤ºä¸º _X_ Ã— _Y_ï¼Œç¬¬ä¸€ä¸ªå¯¹è±¡æ˜¯ _X_ çš„æˆå‘˜è€Œç¬¬äºŒä¸ªå¯¹è±¡æ˜¯ _Y_ çš„æ‰€æœ‰å¯èƒ½ \[ æœ‰åºå¯¹ \] çš„å…¶ä¸­ä¸€ä¸ªæˆå‘˜
- å‡è®¾é›†åˆ A = \{ a, b \}ï¼Œé›†åˆ B = \{ 0, 1, 2 \}ï¼Œåˆ™ä¸¤ä¸ªé›†åˆçš„ç¬›å¡å°”ç§¯ä¸º \{ \( a, 0 \), \( a, 1 \), \( a, 2\), \( b, 0\), \( b, 1\), \( b, 2\) \}

çœ‹æ¥ç¬›å¡å°”ç§¯æ»¡è¶³ç»„åˆè®¡ç®—çš„æ¡ä»¶ï¼Œé‚£ä¹ˆä¸‹é¢å…ˆæ¥ä¸€æ³¢æ€ç»´ç¢°æ’ï¼Œå…ˆé€šè¿‡å¯¼å›¾ï¼Œçœ‹çœ‹æ€ä¹ˆå®ç°

![](https://simpleread.oss-cn-guangzhou.aliyuncs.com/sr_9zrjmqznach6lr08/5c20dafe.jpe)

é€šè¿‡ä¸Šé¢çš„æ€ç»´å¯¼å›¾ï¼Œå¯ä»¥çœ‹å‡ºè¿™ç§è§„æ ¼ç»„åˆæ˜¯ä¸€ä¸ªç»å…¸çš„æ’åˆ—ç»„åˆï¼Œå»ç»„åˆæ¯ä¸€ä¸ªè§„æ ¼å€¼å¾—åˆ°æœ€ç»ˆ SKUã€‚

é‚£ä¹ˆè®©æˆ‘ä»¬æ¥è¿›è¡Œä»£ç å®ç°ï¼Œçœ‹çœ‹ä»£ç å¦‚ä½•å®ç°ç¬›å¡å°”ç§¯ã€‚

### å®ç°ä»£ç 

```javascript
/**
 * ç¬›å¡å°”ç§¯ç»„è£…
 * @param {Array} list
 * @returns []
 */
function descartes(list) {
  // parent ä¸Šä¸€çº§ç´¢å¼•;count æŒ‡é’ˆè®¡æ•°
  let point = {}; // å‡†å¤‡ç§»åŠ¨æŒ‡é’ˆ
  let result = []; // å‡†å¤‡è¿”å›æ•°æ®
  let pIndex = null; // å‡†å¤‡çˆ¶çº§æŒ‡é’ˆ
  let tempCount = 0; // æ¯å±‚æŒ‡é’ˆåæ ‡
  let temp = []; // ç»„è£…å½“ä¸ª sku ç»“æœ

  // ä¸€ï¼šæ ¹æ®å‚æ•°åˆ—ç”ŸæˆæŒ‡é’ˆå¯¹è±¡
  for (let index in list) {
    if (typeof list[index] === "object") {
      point[index] = { parent: pIndex, count: 0 };
      pIndex = index;
    }
  }

  // å•ç»´åº¦æ•°æ®ç»“æ„ç›´æ¥è¿”å›
  if (pIndex === null) {
    return list;
  }

  // åŠ¨æ€ç”Ÿæˆç¬›å¡å°”ç§¯
  while (true) {
    // äºŒï¼šç”Ÿæˆç»“æœ
    let index;
    for (index in list) {
      tempCount = point[index].count;
      temp.push(list[index][tempCount]);
    }
    // å‹å…¥ç»“æœæ•°ç»„
    result.push(temp);
    temp = [];

    // ä¸‰ï¼šæ£€æŸ¥æŒ‡é’ˆæœ€å¤§å€¼é—®é¢˜ï¼Œç§»åŠ¨æŒ‡é’ˆ
    while (true) {
      if (point[index].count + 1 >= list[index].length) {
        point[index].count = 0;
        pIndex = point[index].parent;
        if (pIndex === null) {
          return result;
        }
        // èµ‹å€¼ parent è¿›è¡Œå†æ¬¡æ£€æŸ¥
        index = pIndex;
      } else {
        point[index].count++;
        break;
      }
    }
  }
}
```

è®©æˆ‘ä»¬çœ‹çœ‹å®é™…çš„è¾“å…¥è¾“å‡ºå’Œè°ƒç”¨ç»“æœã€‚

![](https://simpleread.oss-cn-guangzhou.aliyuncs.com/sr_9zrjmqznach6lr08/133778bd.png)

é‚£ä¹ˆè¿™ä¸ªç»å…¸çš„æ’åˆ—ç»„åˆé—®é¢˜å°±è¿™æ ·è§£å†³å•¦ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å†çœ‹çœ‹ï¼Œå¦‚ä½•åœ¨å•†å“è´­ä¹°ä¸­ï¼Œå»å¤„ç†å•†å“å¤šè§„æ ¼é€‰æ‹©ã€‚

## å•†å“å¤šè§„æ ¼é€‰æ‹©

å¼€å§‹å‰å›é¡¾ä¸‹ä½¿ç”¨åœºæ™¯

![](https://simpleread.oss-cn-guangzhou.aliyuncs.com/sr_9zrjmqznach6lr08/fbf3a301.gif)

è¿™ä¸ªå›¾ç‰‡å·²ç»èƒ½å¾ˆæ˜ç¡®çš„å±•ç¤ºä¸šåŠ¡éœ€æ±‚äº†ã€‚ç»“åˆä¸Šè¿°åŠ¨å›¾å¯çŸ¥ï¼Œåœ¨ç”¨æˆ·æ¯æ¬¡é€‰æ‹©äº†æŸä¸€è§„æ ¼åï¼Œéœ€è¦é€šè¿‡ç¨‹åºçš„è®¡ç®—å»å¤„ç†å…¶ä»–è§„æ ¼æƒ…å†µï¼Œä»¥ä¾¿ç»™ç”¨æˆ·æä¾›å½“å‰æƒ…å†µä¸‹å¯ä¾›é€‰æ‹©çš„å…¶ä»–è§„æ ¼ã€‚

é‚£ä¹ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ç°æ€è·¯ï¼Œé¦–å…ˆåœ¨åˆå§‹åŒ–ä¸­ï¼Œæä¾›å¯é€‰æ‹©çš„ SKUï¼Œä»å¯é€‰æ‹©çš„ SKU ä¸­å»å‰”é™¤ä¸åŒ…å«çš„è§„æ ¼å†…å®¹ï¼Œåœ¨å‰”é™¤åï¼Œæä¾›å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥é€‰æ‹©çš„è§„æ ¼ï¼Œåç»­åœ¨æ¯æ¬¡ç”¨æˆ·ç‚¹å‡»æƒ…å†µä¸‹ï¼Œå¤„ç†å¯èƒ½é€‰ä¸­çš„ SKUï¼Œæœ€ç»ˆåœ¨å…¨éƒ¨è§„æ ¼é€‰æ‹©å®Œæˆåï¼Œå¾—åˆ°é€‰ä¸­çš„ SKUã€‚

![](https://simpleread.oss-cn-guangzhou.aliyuncs.com/sr_9zrjmqznach6lr08/7f485b7a.png)

## å•†å“å¤šè§„æ ¼é€‰æ‹©å®ç°æ€è·¯

#### é‚»æ¥çŸ©é˜µ

é¦–å…ˆï¼Œçœ‹ä¸‹ä»€ä¹ˆæ˜¯é‚»æ¥çŸ©é˜µï¼Œæ¥è‡ª[ç™¾åº¦ç™¾ç§‘](https://link.juejin.cn?target=https%3A%2F%2Fbaike.baidu.com%2Fitem%2F%25E9%2582%25BB%25E6%258E%25A5%25E7%259F%25A9%25E9%2598%25B5%2F9796080%3Ffr%3Daladdin "https://baike.baidu.com/item/%E9%82%BB%E6%8E%A5%E7%9F%A9%E9%98%B5/9796080?fr=aladdin")çš„è§£é‡Š

- ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„å­˜æ”¾é¡¶ç‚¹é—´å…³ç³»ï¼ˆè¾¹æˆ–å¼§ï¼‰çš„æ•°æ®ï¼Œè¿™ä¸ªäºŒç»´æ•°ç»„ç§°ä¸ºé‚»æ¥çŸ©é˜µã€‚
- é€»è¾‘ç»“æ„åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šV å’Œ E é›†åˆï¼Œå…¶ä¸­ï¼ŒV æ˜¯é¡¶ç‚¹ï¼ŒE æ˜¯è¾¹ã€‚å› æ­¤ï¼Œç”¨ä¸€ä¸ªä¸€ç»´æ•°ç»„å­˜æ”¾å›¾ä¸­æ‰€æœ‰é¡¶ç‚¹æ•°æ®ã€‚

å­—é¢æè¿°å¯èƒ½æ¯”è¾ƒæ™¦æ¶©éš¾æ‡‚ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹å›¾ç‰‡å¸®åŠ©ç†è§£ï¼Œå¦‚æœä¸¤ä¸ªé¡¶ç‚¹äº’é€šï¼ˆæœ‰è¿çº¿ï¼‰ï¼Œé‚£ä¹ˆå®ƒä»¬å¯¹åº”ä¸‹æ ‡çš„å€¼åˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0ã€‚

![](https://simpleread.oss-cn-guangzhou.aliyuncs.com/sr_9zrjmqznach6lr08/666fda65.png)

#### è®©æˆ‘ä»¬ç»§ç»­å‰é¢çš„ ğŸŒ° æ•°æ®æ¥çœ‹

è§„æ ¼

```javascript
const type = ["ç”·è£¤", "å¥³è£¤"];
const color = ["é»‘è‰²", "ç™½è‰²"];
const size = ["S", "L"];
```

å‡è®¾æ€» SKU çš„åº“å­˜å€¼ä¸ºä¸‹é¢ç¤ºä¾‹ï¼Œå¯é€‰ä¸ºæœ‰åº“å­˜ï¼Œä¸å¯é€‰ä¸ºæŸé¡¹è§„æ ¼æ— åº“å­˜

```javascript
[
  ["ç”·è£¤", "é»‘è‰²", "S"], // S æ— å·
  ["ç”·è£¤", "é»‘è‰²", "L"],
  ["ç”·è£¤", "ç™½è‰²", "S"], // S æ— å·
  ["ç”·è£¤", "ç™½è‰²", "L"],
  ["å¥³è£¤", "é»‘è‰²", "S"], // S æ— å·
  ["å¥³è£¤", "é»‘è‰²", "L"],
  ["å¥³è£¤", "ç™½è‰²", "S"], // S æ— å·
  ["å¥³è£¤", "ç™½è‰²", "L"],
];
```

é‚£ä¹ˆæ ¹æ®é‚»æ¥çŸ©é˜µæ€æƒ³ï¼Œå¯ä»¥å¾—åˆ°ç»“æœå›¾ï¼š

![](https://simpleread.oss-cn-guangzhou.aliyuncs.com/sr_9zrjmqznach6lr08/f6f4e92d.png)

ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒSKU ä¸­æ¯ä¸¤è§„æ ¼éƒ½å¯é€‰æ‹©ï¼Œé‚£ä¹ˆç›¸å¯¹çš„æ ‡å¿—å€¼ä¸º 1ï¼Œå¦åˆ™ä¸º 0ï¼Œå½“æ•´æ¡è§„æ ¼é€‰ä¸­éƒ½æ˜¯ 1ï¼Œæ‰ä¼šä½¿æ•´æ¡ SKU é“¾è·¯å¯é€‰ã€‚

æ€è·¯æ˜¯æœ‰äº†ï¼Œä½†æ˜¯å¦‚ä½•é€šè¿‡ä»£ç å»å®ç°å‘¢ï¼Œæƒ³å¿…å¤§å®¶ä¹Ÿæœ‰å„ç§æ–¹å¼å»å®ç°ï¼Œé‚£ä¹ˆæˆ‘å°±ä»‹ç»ä¸‹è‡ªå·±çš„å®ç°æ–¹å¼ï¼šé›†åˆã€‚

### è®¡ç®—æ€è·¯

#### é›†åˆ

é«˜ä¸­è¿‡å»å¥½å¤šå¹´äº†ï¼Œéš¾å…å¿˜è®°ï¼Œè¿™é‡Œé€šè¿‡é›†åˆè¯´æ˜å›¾ä¸€èµ·å›é¡¾ä¸‹é›†åˆçš„å®šä¹‰

![](https://simpleread.oss-cn-guangzhou.aliyuncs.com/sr_9zrjmqznach6lr08/a10d1eaa.png)

ä¸Šå›¾æ¥è‡ªç™¾åº¦å›¾ç‰‡

æƒ³èµ·é›†åˆï¼Œé‚£ä¹ˆè®¡ç®—æ€è·¯ç®—æ˜¯æœ‰äº†ï¼Œè¿™è¾¹æˆ‘ä»¬éœ€è¦ç”¨é›†åˆç›¸ç­‰çš„æƒ…å†µï¼Œå»å¤„ç† SKU å’Œè§„æ ¼å€¼çš„è®¡ç®—ã€‚

å®ç°æ€ç»´å¯¼å›¾

![](https://simpleread.oss-cn-guangzhou.aliyuncs.com/sr_9zrjmqznach6lr08/99404a13.jpe)

- å‡è®¾ä¸€ä¸ªé›†åˆ A\{a, b, c\} å’Œå¦å¤–ä¸€ä¸ªé›†åˆ B\{a, e\}ï¼Œå¦‚ä½•å¿«é€Ÿåˆ¤æ–­ B æ˜¯å¦æ˜¯ A çš„å­é›†ã€‚è¿™ä¸ªé—®é¢˜æ¯”è¾ƒç®€å•çš„æ–¹æ³•æ˜¯ç”¨ B ä¸­æ‰€æœ‰å…ƒç´ ä¾æ¬¡å’Œ A ä¸­çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå¯¹äºé›†åˆä¸­çš„å…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ å€¼éƒ½æ˜¯å”¯ä¸€çš„ã€‚é€šè¿‡è¿™æ ·çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰å­—æ¯è½¬æ¢ä¸ºä¸€ä¸ªè´¨æ•°ï¼Œé‚£ä¹ˆ **é›†åˆ A å¯ä»¥è¡¨ç¤ºä¸ºé›†åˆå…ƒç´ **\(**è´¨æ•°**\)\*\*çš„ç§¯ï¼ŒB åŒæ ·ï¼Œ\*\*B æ˜¯å¦æ˜¯ A çš„å­é›†ï¼Œè¿™ä¸ªåªéœ€è¦å°† B é™¤ä»¥ Aï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥æ•´é™¤ ï¼Œå¦‚æœå¯ä»¥é‚£ä¹ˆè¯´æ˜ï¼ŒB æ˜¯ A çš„å­é›†ã€‚
- é‚£ä¹ˆæ ¹æ®é‚»æ¥çŸ©é˜µæ€è·¯ï¼Œæ•´æ¡ SKU éƒ½ä¼šæœ‰ä¸€ä¸ª `é›†åˆå€¼`ï¼Œé›†åˆå€¼ç”±æ‰€æœ‰æ¶‰åŠè§„æ ¼å¯¹åº” `ä¹˜ç§¯` å¾—åˆ°çš„ç»“æœï¼Œåœ¨é€‰æ‹©è§„æ ¼è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡é€‰æ‹©å»æ ¹æ®é›†åˆå€¼å»åå‘æ•´é™¤è§„æ ¼å¯¹åº”å€¼å»åˆ¤æ–­æ˜¯å¦æ˜¯å­é›†ï¼Œæ˜¯å¦ä¸º 1ã€‚
- ç°åœ¨æ ¹æ®ä¹˜æ³•ç®—æ³•ï¼Œæœ‰äº†ä»¥ä¸Šçš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥æ•´ç†ä¸‹ç®—æ³•è¿‡ç¨‹ï¼š
  - æ•°æ®é¢„å¤„ç†ï¼ŒæŠŠæ‰€æœ‰éœ€è¦å¤„ç†çš„è§„æ ¼å†…å®¹ä¸€ä¸€å¯¹åº”ä¸€ä¸ªä¸é‡å¤çš„è´¨æ•°ï¼ŒæŠŠ ITEM ç»„åˆè½¬æ¢ä¸ºæ¯ä¸ªè´¨æ•°çš„ç§¯
  - æ ¹æ®ç”¨æˆ·å·²ç»é€‰æ‹©çš„ ITEM è¿›è¡Œæ‰«ææ‰€æœ‰çš„ ITEMï¼Œå¦‚æœ ITEM å·²ç»è¢«é€‰ä¸­ï¼Œåˆ™é€€å‡ºï¼Œå¦‚æœæ²¡æœ‰ï¼Œ åˆ™å’Œæ‰€æœ‰å·²ç»é€‰æ‹©çš„ ITEM è¿›è¡Œç›¸ä¹˜ \(å› ä¸ºä¸€ä¸ªç»„åˆä¸å¯èƒ½å‡ºç°ä¸¤ä¸ªç±»ç›®ç›¸åŒçš„ ITEMï¼Œæ‰€ä»¥é€‰ä¸­çš„ ITEM éœ€è¦å»æ‰å’Œå½“å‰åŒ¹é…çš„ ITEM åœ¨åŒä¸€ä¸ªç±»ç›®ä¸­çš„ ITEM \) ï¼Œè¿™ä¸ªä¹˜æœºå°±æ˜¯ä¸Šæ–‡ä¸­çš„é›†åˆ B
  - æŠŠé›†åˆ B ä¾æ¬¡å’Œ SKU ç»„åˆæ„æˆçš„ç§¯ \(ç›¸å½“äºä¸Šæ–‡ä¸­çš„é›†åˆ A\) è¿›è¡Œç›¸é™¤ï¼Œæ¯”è¾ƒï¼Œå¦‚æœæ•´é™¤ï¼Œåˆ™é€€å‡ºï¼Œå½“å‰åŒ¹é…çš„ SKU å¯ä»¥è¢«é€‰ä¸­ï¼Œå¦‚æœä¸€ç›´åˆ°æœ€åè¿˜æ²¡æœ‰åŒ¹é…ä¸Šï¼Œåˆ™å½“å‰åŒ¹é…çš„ SKU ä¸å¯è¢«é€‰ä¸­ã€‚

æˆ‘ä»¬é€šè¿‡é›†åˆçš„æ€æƒ³ï¼Œçœ‹çœ‹æ ¸å¿ƒä»£ç å§ã€‚

### æ ¸å¿ƒä»£ç 

è®¡ç®—è´¨æ•°æ–¹æ³•ï¼š

```javascript
/**
 * å‡†å¤‡è´¨æ•°
 * @param {Int} num è´¨æ•°èŒƒå›´
 * @returns
 */
getPrime: function (num) {
  // ä»ç¬¬ä¸€ä¸ªè´¨æ•° 2 å¼€å§‹
  let i = 2;
  const arr = [];
  /**
   * æ£€æŸ¥æ˜¯å¦æ˜¯è´¨æ•°
   * @param {Int} number
   * @returns
   */
  const isPrime = (number) => {
    for (let ii = 2; ii < number / 2; ++ii) {
      if (number % ii === 0) {
        return false;
      }
    }
    return true;
  };
  // å¾ªç¯åˆ¤æ–­ï¼Œè´¨æ•°æ•°é‡å¤Ÿå®Œæˆè¿”å›
  for (i; arr.length < total; ++i) {
    if (isPrime(i)) {
      arr.push(i);
    }
  }
  // è¿”å›éœ€è¦çš„è´¨æ•°
  return arr;
}
// ä¸Šè¿°åŠ¨å›¾å…¥å‚ä»¥åŠè¿”å›ç»“æœå±•ç¤ºï¼š
// getPrime(500) return==>
// 0: (8) [2, 3, 5, 7, 11, 13, 17, 19]
// 1: (8) [23, 29, 31, 37, 41, 43, 47, 53]
// 2: (8) [59, 61, 67, 71, 73, 79, 83, 89]
// 3: (8) [97, 101, 103, 107, 109, 113, 127, 131]
// 4: (8) [137, 139, 149, 151, 157, 163, 167, 173]
// 5: (8) [179, 181, 191, 193, 197, 199, 211, 223]
// 6: (8) [227, 229, 233, 239, 241, 251, 257, 263]
```

åˆå§‹åŒ–å¤„ç†ï¼Œå¾—åˆ°ç¬¬ä¸€æ‰¹é‚»æ¥çŸ©é˜µç»“æœï¼š

```javascript
/**
 * åˆå§‹åŒ–ï¼Œæ ¼å¼éœ€è¦å¯¹æ¯”æ•°æ®ï¼Œå¹¶è¿›è¡Œåˆå§‹åŒ–æ˜¯å¦å¯é€‰è®¡ç®—
 */
init: function () {
  this.light = util.cloneTwo(this.maps, true);
  var light = this.light;

  // é»˜è®¤æ¯ä¸ªè§„åˆ™éƒ½å¯ä»¥é€‰ä¸­ï¼Œå³èµ‹å€¼ä¸º 1
  for (var i = 0; i < light.length; i++) {
    var l = light[i];
    for (var j = 0; j < l.length; j++) {
      this._way[l[j]] = [i, j];
      l[j] = 1;
    }
  }
  // å¯¹åº”ç»“æœå€¼ï¼Œæ­¤å¤„å°†æ•°æ®å¤„ç†çš„æ–¹æ³•å¯¹åº”é‚»æ¥çŸ©é˜µçš„æ€ç»´å¯¼å›¾
  // 0: (8) [1, 1, 1, 1, 1, 1, 1, 1]
  // 1: (8) [1, 1, 1, 1, 1, 1, 1, 1]
  // 2: (8) [1, 1, 1, 1, 1, 1, 1, 1]
  // 3: (8) [1, 1, 1, 1, 1, 1, 1, 1]
  // 4: (8) [1, 1, 1, 1, 1, 1, 1, 1]
  // 5: (8) [1, 1, 1, 1, 1, 1, 1, 1]
  // 6: (8) [1, 1, 1, 1, 1, 1, 1, 1]

  // å¾—åˆ°æ¯ä¸ªå¯æ“ä½œçš„ SKU è´¨æ•°çš„é›†åˆ
  for (i = 0; i < this.openway.length; i++) {
    // è®¡ç®—ç»“æœå•è¡Œç¤ºä¾‹ï¼š
    // this.openway[i].join('*') ==> eval(2*3*5*7*11*13*17*19)
    this.openway[i] = eval(this.openway[i].join('*'));
  }
  // return åˆå§‹åŒ–å¾—åˆ°è§„æ ¼ä½ç½®ï¼Œè§„æ ¼é»˜è®¤å¯é€‰å¤„ç†ï¼Œå¯é€‰ SKU çš„è§„æ ¼å¯¹åº”çš„è´¨æ•°åˆé›†
  this._check();
}
```

è®¡ç®—æ˜¯å¦å¯é€‰æ–¹æ³•ï¼š

```javascript
/**
 * æ£€æŸ¥æ˜¯å¦å¯ä»¥é€‰æ‹©ï¼Œæ›´æ–°é‚»æ¥çŸ©é˜µå¯¹åº”ç»“æœå€¼
 * @param {Boolean} isAdd æ˜¯å¦æ–°å¢çŠ¶æ€
 * @returns
 */
_check: function (isAdd) {
  var light = this.light;
  var maps = this.maps;

  for (var i = 0; i < light.length; i++) {
    var li = light[i];
    var selected = this._getSelected(i);
    for (var j = 0; j < li.length; j++) {
      if (li[j] !== 2) {
      //å¦‚æœæ˜¯åŠ ä¸€ä¸ªæ¡ä»¶ï¼Œåªåœ¨æ˜¯ light å€¼ä¸º 1 çš„ç‚¹è¿›è¡Œé€‰æ‹©
        if (isAdd) {
          if (li[j]) {
            light[i][j] = this._checkItem(maps[i][j], selected);
          }
        } else {
          light[i][j] = this._checkItem(maps[i][j], selected);
        }
      }
    }
  }
  return this.light;
}ï¼Œ

/**
 * æ£€æŸ¥æ˜¯å¦å¯é€‰å†…å®¹ï¼Œæ›´æ–°é‚»æ¥çŸ©é˜µå¯¹åº”ç»“æœå€¼
 * @param {Int} item å½“å‰è§„æ ¼è´¨æ•°
 * @param {Array} selected
 * @returns
 */
_checkItem: function (item, selected) {
  // æ‹¿åˆ°å¯ä»¥é€‰æ‹©çš„ SKU å†…å®¹é›†åˆ
  var openway = this.openway;
  var val;
  // æ‹¿åˆ°å·²ç»é€‰ä¸­è§„æ ¼é›†åˆ*æ­¤è§„æ ¼é›†åˆå€¼
  val = item * selected;
  // å¯é€‰ SKU é›†åˆåé™¤ï¼ŒæŸ¥è¯¢æ˜¯å¦å¯é€‰
  for (var i = 0; i < openway.length; i++) {
    this.count++;
    if (openway[i] % val === 0) {
      return 1;
    }
  }
  return 0;
}

```

æ·»åŠ è§„æ ¼æ–¹æ³•ï¼š

```javascript
/** é€‰æ‹©å¯é€‰è§„æ ¼åå¤„ç†
 * @param {array} point [x, y]
 */
add: function (point) {
  point = point instanceof Array ? point : this._way[point];
  // å¾—åˆ°é€‰ä¸­è§„æ ¼å¯¹åº”çš„è´¨æ•°å†…å®¹
  var val = this.maps[point[0]][point[1]];

  // æ£€æŸ¥æ˜¯å¦å¯é€‰ä¸­
  if (!this.light[point[0]][point[1]]) {
    throw new Error(
      'this point [' + point + '] is no availabe, place choose an other'
    );
  }
  // åˆ¤æ–­æ˜¯å¦é€‰ä¸­å†…å®¹å·²ç»å­˜åœ¨å·²ç»é€‰æ‹©å†…å®¹ä¸­
  if (val in this.selected) return;

  var isAdd = this._dealChange(point, val);
  this.selected.push(val);
  // é€‰æ‹©åé‚»æ¥çŸ©é˜µå¯¹åº”æ•°æ®ä¿®æ”¹ä¸º 2ï¼Œä»¥åšæ˜¯å¦å¯é€‰åŒºåˆ†
  this.light[point[0]][point[1]] = 2;
  this._check(!isAdd);
}
```

ç§»é™¤å·²é€‰è§„æ ¼æ–¹æ³•ï¼š

```javascript
/**
 * ç§»é™¤å·²é€‰è§„æ ¼
 * @param {Array} point
 */
remove: function (point) {
  point = point instanceof Array ? point : this._way[point];
  // å®¹é”™å¤„ç†
  try {
    var val = this.maps[point[0]][point[1]];
  } catch (e) {}

  if (val) {
    // åœ¨é€‰ä¸­å†…å®¹ä¸­ï¼Œå®šä½å–å‡ºéœ€è¦ç§»é™¤è§„æ ¼è´¨æ•°
    for (var i = 0; i < this.selected.length; i++) {
      if (this.selected[i] == val) {
        var line = this._way[this.selected[i]];
        // å¯¹åº”é‚»æ¥çŸ©é˜µå†…å®¹æ›´æ–°ä¸ºå¯é€‰
        this.light[line[0]][line[1]] = 1;
        // ä»å·²é€‰å†…å®¹ä¸­ç§»é™¤
        this.selected.splice(i, 1);
      }
    }
  // è¿›è¡Œé‡æ–°è®¡ç®—
  this._check();
  }
}
```

### æ•´ä½“ä»£ç 

å¼€æºä»£ç å°†åœ¨ 9 æœˆä¸­æ—¬æä¾›ã€‚å¦‚éœ€ï¼Œè¯·å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šæ”¿é‡‡äº‘å‰ç«¯å›¢é˜Ÿã€‚å›å¤ skuï¼Œå³å¯è·å–å¼€æºåœ°å€ã€‚

## æ€»ç»“

çœ‹æ¥è€å¸ˆæ²¡æœ‰éª—æˆ‘ä»¬ï¼Œåœ¨å­¦ä¹ ä¸­å­¦åˆ°çš„**ç»å…¸æ’åˆ—ç»„åˆ**ï¼Œ**é‚»æ¥çŸ©é˜µ**ï¼Œ**é›†åˆ**è¿˜æ˜¯å¾ˆæœ‰ç”¨å¤„çš„ã€‚å…¶ä¸­ç»å…¸æ’åˆ—ç»„åˆ**ç¬›å¡å°”ç§¯**æ€æƒ³ä¸ç”¨æ­»è®°ç¡¬èƒŒï¼Œé€šè¿‡ç†è§£å°±å¯ä»¥å®Œæˆé€’å½’æ ‘çŠ¶å›¾çš„å¤§é‡æƒ…å†µã€‚æ ¹æ®é‚»æ¥çŸ©é˜µï¼Œå¯ä»¥ç®€åŒ–ç©ºé—´å¤æ‚ç¨‹åº¦ï¼Œé€šè¿‡é›†åˆæ€æƒ³ï¼Œå®ç°é€‰æ‹©æ•°æ®åˆ¤æ–­ã€‚

ç›¸ä¿¡é˜…è¯»å®Œæœ¬ç¯‡æ–‡ç« çš„ä½ ï¼Œå¯¹äºç”µå•†è§„æ ¼å¤„ç†çš„ä¸¤ä¸ªç®—æ³•å·²ç»æœ‰äº†å¤§ä½“äº†è§£ã€‚

### å‚è€ƒæ–‡çŒ®

1.ä¸Šè¿°é›†åˆè®¡ç®—æ€è·¯å€Ÿé‰´æ–‡çŒ®ï¼Œ è¯¦æƒ…è§[é“¾æ¥](http://git.shepherdwind.com/sku-search-algorithm.html)ã€‚

2.å¦ä¸€ç§æ­£åˆ™åŒ¹é…å®ç°æ€è·¯æ–‡çŒ®å€Ÿé‰´ï¼Œè¯¦æƒ…è§[é“¾æ¥](https://gist.github.com/shepherdwind/2141756)ã€‚

3.é‚»æ¥çŸ©é˜µæ€è·¯å€Ÿé‰´æ–‡çŒ®ï¼Œè¯¦æƒ…è§[é“¾æ¥](https://gist.github.com/shepherdwind/2141756)ã€‚
